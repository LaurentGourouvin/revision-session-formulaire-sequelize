BEGIN;

DROP TABLE IF EXISTS "user", "role";

CREATE TABLE IF NOT EXISTS "user" (
    "id" INTEGER NOT NULL GENERATED ALWAYS AS IDENTITY PRIMARY KEY,
    "name" VARCHAR(255) NOT NULL,
    "password" VARCHAR(10) NOT NULL,
    "email" VARCHAR(255) NOT NULL,
    "role_id" INTEGER NOT NULL
);

CREATE TABLE IF NOT EXISTS "role" (
    "id" INTEGER NOT NULL GENERATED ALWAYS AS IDENTITY PRIMARY KEY,
    "description" VARCHAR(255) NOT NULL
);

ALTER TABLE "user" 
    ADD CONSTRAINT "role_id" FOREIGN KEY ("role_id") REFERENCES "role"("id")
;

COMMIT;